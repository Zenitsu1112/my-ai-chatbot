<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <title>AI Chat</title>
    <style>
        body { font-family: Arial; padding: 20px; max-width: 400px; margin: 0 auto; }
        input, button { padding: 10px; margin: 5px 0; width: 100%; }
        #out { border: 1px solid #ccc; padding: 10px; margin-top: 10px; min-height: 50px; }
    </style>
</head>
<body>
    <h2>AI Chat</h2>
    <input type="password" id="p" value="1112" placeholder="Password">
    <button onclick="go()">Connect</button>
    <div id="out"></div>

    <script>
        // Add timestamp to prevent caching
        const API = 'https://my-ai-chatbot.zenitsu11-nezuko12.workers.dev?_=' + Date.now();
        
        async function go() {
            const out = document.getElementById('out');
            const pwd = document.getElementById('p').value;
            
            out.textContent = 'Connecting...';
            
            try {
                const res = await fetch(API, {
                    method: 'POST',
                    mode: 'cors',
                    cache: 'no-store',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    body: JSON.stringify({
                        password: pwd,
                        message: 'Hello'
                    })
                });
                
                const text = await res.text();
                out.textContent = 'Status: ' + res.status + '\n' + text;
                
            } catch(e) {
                out.textContent = 'Error: ' + e.message;
                console.error(e);
            }
        }
    </script>
</body>
</html>
